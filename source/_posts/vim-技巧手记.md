---
title: vim 技巧手记
date: 2017-03-22 11:28:42
tags: 
- vim
---

1. 根据文件内容查找文件：`vimgrep`
```vim
:vimgrep /Exception/ *.log    #查找目录下  所有含Exception 的 .log文件
:vimgrep /Exception/ */*.log # 遍历子目录
#搜索到的文件列表会加入到quickfix中去，执行:
:copen
```
2. 排序，删除重复行
```vim
:sort   //可以直接排序，这个太好用了
:g/^\(.*\)$\n\1$/d                      #去除重复行
:g/\%(^\1$\n\)\@<=\(.*\)$/d     #功能同上，也是去除重复行
:g/\%(^\1\>.*$\n\)\@<=\(\k\+\).*$/d  #功能同上，也是去除重复行
```
3. 查找忽略大小写
```vim
:set ic  #忽略大小写 set ignorecase
:set noic #不忽略大小写
```
4. 标记复制、粘贴
```vim
"ay
"ap
```
5. 数字递增
```vim
插入模式下：Ctrl+r  ===> =(等号) ===> range(1,100)  回车
```
6. 多文件内容查找替换
```vim
:args *.jsp  #第一步：择定范围 *.jsp
:argdo %s#<title>光大保德信</title>#<title>光大保德信基金</title>#gc|update   #替换内容“|update”执行替换后并且存盘。
```
7. 删除/保留匹配的行
```vim
:g/pattern/d # 用于删除带有指定搜索内容的行
:g!/pattern/d 用于删除不带指定搜索内容的行
```
8. 删除空白行
```vim
:g/^\s*$/d
```
9. html标签选中、内容选中
```vim
vat #整个标签
vit #标签的内容
```
10. 正则替换
```vim
:%s#("\([A-Z_]\+\)")#'\1'#g
-- 功能将  ("BIT") 替换为 'BIT'，将两边的括号去除了，将双引号改为了单引号
-- %s 表示在所有行中搜索替换，若要指定范围可以写成：1,10s、10s、1,$s 分别表示：1-10行、只在第10行、1-最后一行
-- # 跟在上面的s后面，表示使用其作为分隔符，因为/分隔符经常会用于替换内容，使用到就得转义比较麻烦
-- \(、\)、\+、\1 这些是正则表达式的内容，前面两个表示分组捕获，\+ 表示表达式的匹配次数还有*、?等等，\1 则是取前面捕获的第一个分组的内容
```
11. 粘贴时取消小自动缩进
```vim
:set paste # 开启paste模式
:set nopaste # 粘贴完毕关闭paste模式
```
12. BOM标记相关
```vim
:set nobomb #去掉BOM标记
:set bomb #加上BOM标记
:set bomb? # 查询当前是否有BOM标记
:%!xxd #以16进制模式打开文件，可以看到具体的大端标记或小端标记
```